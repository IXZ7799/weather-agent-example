# InfoSec AI Buddy - Agent System

## Overview

The Agent System extends the InfoSec AI Buddy by allowing you to create specialized AI agents that can be used for specific tasks. These agents are created from code scaffolds generated by the Mastra AI scaffolding tool and saved to the Supabase database for use in conversations.

## Features

- **Generate Code Scaffolds**: Use the Mastra AI scaffolding tool to generate secure, educational code scaffolds for components, pages, hooks, services, and utilities.
- **Create Agents**: Save generated scaffolds as AI agents with specific instructions and security focus.
- **Use Agents in Conversations**: Request specific agents in conversations to leverage their specialized knowledge.
- **Manage Agents**: View, browse, and manage all available agents through the Admin panel.

## How It Works

### 1. Creating Agents

Agents can be created in two ways:

1. **From Scaffolding Tool**: 
   - Navigate to the Admin panel > Scaffolding tab
   - Generate a code scaffold using the form
   - Check the "Save as Agent" option
   - The generated code will be saved as an agent in the database

2. **Manually**: 
   - Create a TypeScript file with agent configuration
   - Use the AgentManagement utility to save it to the database

### 2. Using Agents in Conversations

To use an agent in a conversation with the InfoSec AI Buddy, simply ask for it by name:

- "Can the Security Validator Agent help me with this code?"
- "Use the React Component Agent for this question."
- "I'd like the API Service Agent to handle this."

The system will automatically detect your request and switch to the appropriate agent's specialized instructions.

### 3. Agent Structure

Each agent consists of:

- **Name**: A unique identifier for the agent
- **Description**: What the agent does
- **Instructions**: Detailed instructions for the AI when using this agent
- **Type**: The type of component (component, page, hook, service, utility)
- **Security Focus**: Specific security aspects the agent focuses on
- **Code**: The original code scaffold that created the agent

## Technical Implementation

### Backend

- **Supabase Database**: Stores agent configurations in the `agents` table
- **Row Level Security**: Ensures only admin users can create/modify agents
- **Edge Functions**: Modified to detect agent requests and use appropriate instructions

### Frontend

- **Admin Panel**: Includes an Agents tab for managing agents
- **Scaffolding Tool**: Allows saving scaffolds as agents
- **Agent List**: Displays all available agents with details

## Setup

To set up the agent system:

1. Run the `setup-agents-table.sql` script in your Supabase dashboard SQL Editor
2. This is a one-time setup that creates the agents table and necessary security policies
3. After this setup, all agent management can be done directly through the Admin UI

No additional deployment steps are needed - the system is fully dynamic!

## Security Considerations

- Agent creation is restricted to admin users through RLS policies
- All agent instructions are validated before use
- The system prompt includes security best practices
- Generated code follows secure coding guidelines
